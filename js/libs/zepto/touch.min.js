(function(f){function u(){c=null;a.last&&(a.el.trigger("longTap"),a={})}function q(){e&&clearTimeout(e);l&&clearTimeout(l);m&&clearTimeout(m);c&&clearTimeout(c);e=l=m=c=null;a={}}function r(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function s(a,c){return a.type=="pointer"+c||a.type.toLowerCase()=="mspointer"+c}var a={},e,l,m,c,p;f(document).ready(function(){var n,t,h=0,k=0,d,g;"MSGesture"in window&&(p=new MSGesture,p.target=document.body);f(document).bind("MSGestureEnd",
function(b){if(b=1<b.velocityX?"Right":-1>b.velocityX?"Left":1<b.velocityY?"Down":-1>b.velocityY?"Up":null)a.el.trigger("swipe"),a.el.trigger("swipe"+b)}).on("touchstart MSPointerDown pointerdown",function(b){if(!(g=s(b,"down"))||r(b))d=g?b:b.touches[0],b.touches&&1===b.touches.length&&a.x2&&(a.x2=void 0,a.y2=void 0),n=Date.now(),t=n-(a.last||n),a.el=f("tagName"in d.target?d.target:d.target.parentNode),e&&clearTimeout(e),a.x1=d.pageX,a.y1=d.pageY,0<t&&250>=t&&(a.isDoubleTap=!0),a.last=n,c=setTimeout(u,
750),p&&g&&p.addPointer(b.pointerId)}).on("touchmove MSPointerMove pointermove",function(b){if(!(g=s(b,"move"))||r(b))d=g?b:b.touches[0],c&&clearTimeout(c),c=null,a.x2=d.pageX,a.y2=d.pageY,h+=Math.abs(a.x1-a.x2),k+=Math.abs(a.y1-a.y2)}).on("touchend MSPointerUp pointerup",function(b){if(!(g=s(b,"up"))||r(b))c&&clearTimeout(c),c=null,a.x2&&30<Math.abs(a.x1-a.x2)||a.y2&&30<Math.abs(a.y1-a.y2)?m=setTimeout(function(){a.el.trigger("swipe");a.el.trigger("swipe"+(Math.abs(a.x1-a.x2)>=Math.abs(a.y1-a.y2)?
0<a.x1-a.x2?"Left":"Right":0<a.y1-a.y2?"Up":"Down"));a={}},0):"last"in a&&(30>h&&30>k?l=setTimeout(function(){var b=f.Event("tap");b.cancelTouch=q;a.el.trigger(b);a.isDoubleTap?(a.el&&a.el.trigger("doubleTap"),a={}):e=setTimeout(function(){e=null;a.el&&a.el.trigger("singleTap");a={}},250)},0):a={}),h=k=0}).on("touchcancel MSPointerCancel pointercancel",function(){h=k=0;q()});f(window).on("scroll",q)});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(a){f.fn[a]=
function(c){return this.on(a,c)}})})(Zepto);
